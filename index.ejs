<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PES Store | متجر الحسابات</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #0f172a; color: #f8fafc; font-family: sans-serif; }
        .hero { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); padding: 30px 0; border-bottom: 1px solid #334155; }
        .hero h1 { font-size: 1.8rem; }
        .filter-section { background: #1e293b; border-radius: 12px; border: 1px solid #334155; }
        .form-control-dark { background-color: #0f172a; border: 1px solid #475569; color: white; }
        .filter-btn { border-radius: 20px; color: #94a3b8; border-color: #334155; }
        .filter-btn.active { background-color: #3b82f6; border-color: #3b82f6; color: white; }
        .card-pes { background: #1e293b; border: 1px solid #334155; border-radius: 15px; transition: 0.3s; }
        .card-pes:hover { transform: translateY(-5px); border-color: #3b82f6; }
        .timer-box { background: #ef4444; color: white; font-size: 0.75rem; padding: 3px 10px; border-radius: 5px; font-weight: bold; margin-bottom: 10px; display: inline-block; }
        .price { font-size: 1.4rem; color: #22c55e; font-weight: 800; }
        .btn-buy { background-color: #0088cc; border: none; font-weight: bold; }
        .featured-badge { position: absolute; top: 15px; right: 15px; background: #eab308; color: #000; padding: 2px 10px; border-radius: 5px; font-weight: bold; font-size: 0.8rem; z-index: 10; }
    </style>
</head>
<body>

<header class="hero text-center">
    <div class="container">
        <h1 class="fw-bold">متجر eFootball</h1>
        <p class="text-secondary small">تسليم فوري ودعم فني متواصل</p>
    </div>
</header>

<div class="container my-3">
    <div class="filter-section p-3 shadow-lg">
        <input type="text" id="searchInput" class="form-control form-control-dark mb-3" placeholder="ابحث عن لاعب أو ميزة...">
        <div class="d-flex gap-2 flex-wrap justify-content-center">
            <button class="btn btn-sm filter-btn active" data-filter="all">الكل</button>
            <button class="btn btn-sm filter-btn" data-filter="low">اقتصادية (<$30)</button>
            <button class="btn btn-sm filter-btn" data-filter="mid">متميزة ($30-$80)</button>
            <button class="btn btn-sm filter-btn" data-filter="high">VIP (>$80)</button>
        </div>
    </div>
</div>

<div class="container mb-5">
    <div class="row g-4" id="accountsGrid">
        <% accounts.forEach(acc => { %>
        <div class="col-md-4 account-card" data-price="<%= acc.price %>">
            <div class="card card-pes h-100 position-relative">
                <% if(acc.featured) { %> <span class="featured-badge">عرض خاص</span> <% } %>
                <img src="<%= acc.img %>" class="card-img-top p-2 rounded-4" style="height: 180px; object-fit: cover;">
                <div class="card-body">
                    <% if(acc.featured) { %>
                        <div class="timer-box"><i class="fas fa-clock"></i> ينتهي: <span class="countdown">--:--:--</span></div>
                    <% } %>
                    <h5 class="card-title fw-bold text-white"><%= acc.title %></h5>
                    <p class="text-secondary small mb-3"><%= acc.players %></p>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="price">$<%= acc.price %></span>
                        <a href="https://t.me/zedx07?text=طلب شراء الحساب رقم #<%= acc.id %>" class="btn btn-buy text-white px-4">شراء الآن</a>
                    </div>
                </div>
            </div>
        </div>
        <% }) %>
    </div>
</div>

<script>
    // نظام الفلترة
    const searchInput = document.getElementById('searchInput');
    const filterBtns = document.querySelectorAll('.filter-btn');
    const cards = document.querySelectorAll('.account-card');

    function filter() {
        const text = searchInput.value.toLowerCase();
        const activeBtn = document.querySelector('.filter-btn.active').dataset.filter;

        cards.forEach(card => {
            const price = parseFloat(card.dataset.price);
            const content = card.innerText.toLowerCase();
            let show = content.includes(text);

            if (activeBtn === 'low' && price >= 30) show = false;
            if (activeBtn === 'mid' && (price < 30 || price > 80)) show = false;
            if (activeBtn === 'high' && price <= 80) show = false;

            card.style.display = show ? "block" : "none";
        });
    }

    searchInput.addEventListener('keyup', filter);
    filterBtns.forEach(btn => btn.addEventListener('click', function() {
        filterBtns.forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        filter();
    }));

    // عداد الوقت
    function updateTimers() {
        const now = new Date();
        const deadline = new Date().setHours(23, 59, 59);
        const diff = deadline - now;
        const h = Math.floor(diff / 3600000);
        const m = Math.floor((diff % 3600000) / 60000);
        const s = Math.floor((diff % 60000) / 1000);
        document.querySelectorAll('.countdown').forEach(c => {
            c.innerHTML = `${h}س ${m}د ${s}ث`;
        });
    }
    setInterval(updateTimers, 1000);
    updateTimers();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>SafeNode - لوحة التحكم</title>
    <style>
        table { width: 80%; margin: 50px auto; border-collapse: collapse; background: white; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: center; }
        th { background: #333; color: white; }
        .btn-approve { background: #28a745; color: white; border: none; padding: 5px 15px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h2 style="text-align: center;">إدارة طلبات التواصل</h2>
    <table>
        <tr>
            <th>اسم المستخدم</th>
            <th>الحالة</th>
            <th>الإجراء</th>
        </tr>
        <% users.forEach(user => { %>
        <tr>
            <td><%= user.username %></td>
            <td><%= user.isApproved ? 'تم التفعيل' : 'قيد الانتظار' %></td>
            <td>
                <% if(!user.isApproved) { %>
                <form action="/approve/<%= user._id %>" method="POST">
                    <button class="btn-approve">تفعيل التواصل</button>
                </form>
                <% } %>
            </td>
        </tr>
        <% }) %>
    </table>
</body>
</html>
